import{r as i,H as ne,C as re,b as _,w as ae,n as B,R as l,Y as U,f as oe,i as ie,c as H,l as se}from"./index-Dp5wEvTN.js";import{K as g}from"./Keyframes-Dnv42HUq.js";import{b as le,d as ce,K as Y,D as fe}from"./EllipsisOutlined-Cb_aXFVx.js";import{I as ue}from"./isVisible-KaZRGkfQ.js";const me=new g("antMoveDownIn",{"0%":{transform:"translate3d(0, 100%, 0)",transformOrigin:"0 0",opacity:0},"100%":{transform:"translate3d(0, 0, 0)",transformOrigin:"0 0",opacity:1}}),ve=new g("antMoveDownOut",{"0%":{transform:"translate3d(0, 0, 0)",transformOrigin:"0 0",opacity:1},"100%":{transform:"translate3d(0, 100%, 0)",transformOrigin:"0 0",opacity:0}}),de=new g("antMoveLeftIn",{"0%":{transform:"translate3d(-100%, 0, 0)",transformOrigin:"0 0",opacity:0},"100%":{transform:"translate3d(0, 0, 0)",transformOrigin:"0 0",opacity:1}}),ge=new g("antMoveLeftOut",{"0%":{transform:"translate3d(0, 0, 0)",transformOrigin:"0 0",opacity:1},"100%":{transform:"translate3d(-100%, 0, 0)",transformOrigin:"0 0",opacity:0}}),pe=new g("antMoveRightIn",{"0%":{transform:"translate3d(100%, 0, 0)",transformOrigin:"0 0",opacity:0},"100%":{transform:"translate3d(0, 0, 0)",transformOrigin:"0 0",opacity:1}}),ye=new g("antMoveRightOut",{"0%":{transform:"translate3d(0, 0, 0)",transformOrigin:"0 0",opacity:1},"100%":{transform:"translate3d(100%, 0, 0)",transformOrigin:"0 0",opacity:0}}),he=new g("antMoveUpIn",{"0%":{transform:"translate3d(0, -100%, 0)",transformOrigin:"0 0",opacity:0},"100%":{transform:"translate3d(0, 0, 0)",transformOrigin:"0 0",opacity:1}}),Oe=new g("antMoveUpOut",{"0%":{transform:"translate3d(0, 0, 0)",transformOrigin:"0 0",opacity:1},"100%":{transform:"translate3d(0, -100%, 0)",transformOrigin:"0 0",opacity:0}}),we={"move-up":{inKeyframes:he,outKeyframes:Oe},"move-down":{inKeyframes:me,outKeyframes:ve},"move-left":{inKeyframes:de,outKeyframes:ge},"move-right":{inKeyframes:pe,outKeyframes:ye}},Le=(e,r)=>{const{antCls:t}=e,a=`${t}-${r}`,{inKeyframes:u,outKeyframes:n}=we[r];return[le(a,u,n,e.motionDurationMid),{[`
        ${a}-enter,
        ${a}-appear
      `]:{opacity:0,animationTimingFunction:e.motionEaseOutCirc},[`${a}-leave`]:{animationTimingFunction:e.motionEaseInOutCirc}}]};function Ce(e){return r=>i.createElement(ne,{theme:{token:{motion:!1,zIndexPopupBase:0}}},i.createElement(e,Object.assign({},r)))}const Ve=(e,r,t,a)=>Ce(n=>{const{prefixCls:s,style:f}=n,v=i.useRef(null),[y,p]=i.useState(0),[o,c]=i.useState(0),[P,N]=ce(!1,{value:n.open}),{getPrefixCls:K}=i.useContext(re),E=K(r||"select",s);i.useEffect(()=>{if(N(!0),typeof ResizeObserver<"u"){const x=new ResizeObserver(d=>{const h=d[0].target;p(h.offsetHeight+8),c(h.offsetWidth)}),b=setInterval(()=>{var d;const h=t?`.${t(E)}`:`.${E}-dropdown`,R=(d=v.current)===null||d===void 0?void 0:d.querySelector(h);R&&(clearInterval(b),x.observe(R))},10);return()=>{clearInterval(b),x.disconnect()}}},[]);let C=Object.assign(Object.assign({},n),{style:Object.assign(Object.assign({},f),{margin:0}),open:P,visible:P,getPopupContainer:()=>v.current});a&&(C=a(C));const D={paddingBottom:y,position:"relative",minWidth:o};return i.createElement("div",{ref:v,style:D},i.createElement(e,Object.assign({},C)))});var be={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M884 256h-75c-5.1 0-9.9 2.5-12.9 6.6L512 654.2 227.9 262.6c-3-4.1-7.8-6.6-12.9-6.6h-75c-6.5 0-10.3 7.4-6.5 12.7l352.6 486.1c12.8 17.6 39 17.6 51.7 0l352.6-486.1c3.9-5.3.1-12.7-6.4-12.7z"}}]},name:"down",theme:"outlined"},Re=function(r,t){return i.createElement(ue,_({},r,{ref:t,icon:be}))},$e=i.forwardRef(Re),Me=Y.ESC,Pe=Y.TAB;function Ee(e){var r=e.visible,t=e.triggerRef,a=e.onVisibleChange,u=e.autoFocus,n=e.overlayRef,s=i.useRef(!1),f=function(){if(r){var o,c;(o=t.current)===null||o===void 0||(c=o.focus)===null||c===void 0||c.call(o),a==null||a(!1)}},v=function(){var o;return(o=n.current)!==null&&o!==void 0&&o.focus?(n.current.focus(),s.current=!0,!0):!1},y=function(o){switch(o.keyCode){case Me:f();break;case Pe:{var c=!1;s.current||(c=v()),c?o.preventDefault():f();break}}};i.useEffect(function(){return r?(window.addEventListener("keydown",y),u&&ae(v,3),function(){window.removeEventListener("keydown",y),s.current=!1}):function(){s.current=!1}},[r])}var xe=i.forwardRef(function(e,r){var t=e.overlay,a=e.arrow,u=e.prefixCls,n=i.useMemo(function(){var f;return typeof t=="function"?f=t():f=t,f},[t]),s=B(r,n==null?void 0:n.ref);return l.createElement(l.Fragment,null,a&&l.createElement("div",{className:"".concat(u,"-arrow")}),l.cloneElement(n,{ref:U(n)?s:void 0}))}),O={adjustX:1,adjustY:1},w=[0,0],Ae={topLeft:{points:["bl","tl"],overflow:O,offset:[0,-4],targetOffset:w},top:{points:["bc","tc"],overflow:O,offset:[0,-4],targetOffset:w},topRight:{points:["br","tr"],overflow:O,offset:[0,-4],targetOffset:w},bottomLeft:{points:["tl","bl"],overflow:O,offset:[0,4],targetOffset:w},bottom:{points:["tc","bc"],overflow:O,offset:[0,4],targetOffset:w},bottomRight:{points:["tr","br"],overflow:O,offset:[0,4],targetOffset:w}},Ie=["arrow","prefixCls","transitionName","animation","align","placement","placements","getPopupContainer","showAction","hideAction","overlayClassName","overlayStyle","visible","trigger","autoFocus","overlay","children","onVisibleChange"];function Ne(e,r){var t,a=e.arrow,u=a===void 0?!1:a,n=e.prefixCls,s=n===void 0?"rc-dropdown":n,f=e.transitionName,v=e.animation,y=e.align,p=e.placement,o=p===void 0?"bottomLeft":p,c=e.placements,P=c===void 0?Ae:c,N=e.getPopupContainer,K=e.showAction,E=e.hideAction,C=e.overlayClassName,D=e.overlayStyle,x=e.visible,b=e.trigger,d=b===void 0?["hover"]:b,h=e.autoFocus,R=e.overlay,A=e.children,S=e.onVisibleChange,q=oe(e,Ie),X=l.useState(),V=ie(X,2),G=V[0],$=V[1],T="visible"in e?x:G,F=l.useRef(null),W=l.useRef(null),j=l.useRef(null);l.useImperativeHandle(r,function(){return F.current});var k=function(m){$(m),S==null||S(m)};Ee({visible:T,triggerRef:j,onVisibleChange:k,autoFocus:h,overlayRef:W});var J=function(m){var I=e.onOverlayClick;$(!1),I&&I(m)},z=function(){return l.createElement(xe,{ref:W,overlay:R,prefixCls:s,arrow:u})},Q=function(){return typeof R=="function"?z:z()},Z=function(){var m=e.minOverlayWidthMatchTrigger,I=e.alignPoint;return"minOverlayWidthMatchTrigger"in e?m:!I},ee=function(){var m=e.openClassName;return m!==void 0?m:"".concat(s,"-open")},te=l.cloneElement(A,{className:H((t=A.props)===null||t===void 0?void 0:t.className,T&&ee()),ref:U(A)?B(j,A.ref):void 0}),L=E;return!L&&d.indexOf("contextMenu")!==-1&&(L=["click"]),l.createElement(fe,_({builtinPlacements:P},q,{prefixCls:s,ref:F,popupClassName:H(C,se({},"".concat(s,"-show-arrow"),u)),popupStyle:D,action:d,showAction:K,hideAction:L,popupPlacement:o,popupAlign:y,popupTransitionName:f,popupAnimation:v,popupVisible:T,stretch:Z()?"minWidth":"",popup:Q(),onPopupVisibleChange:k,onPopupClick:J,getPopupContainer:N}),te)}const Fe=l.forwardRef(Ne);export{Fe as D,$e as R,Ve as g,Le as i,Ce as w};
